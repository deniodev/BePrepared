generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Province model
model Province {
  id          String       @id @default(uuid())
  designation String
  createdAt   DateTime     @default(now()) @map("created_at")
  updatedAt   DateTime     @updatedAt @map("updated_at")
  districts   District[] // One-to-many relation with District
  subscribers Subscriber[] // One-to-many relation with Subscriber

  @@map("provinces")
}

// District model
model District {
  id          String       @id @default(uuid())
  designation String
  provinceId  String       @map("province_id")
  createdAt   DateTime     @default(now()) @map("created_at")
  updatedAt   DateTime     @updatedAt @map("updated_at")
  province    Province     @relation(fields: [provinceId], references: [id]) // Many-to-one relation with Province
  subscribers Subscriber[] // One-to-many relation with Subscriber

  @@map("districts")
}

// Subscriber model
model Subscriber {
  id         String   @id @default(uuid())
  phone      String   @unique @db.VarChar(9)
  deviceId   String?  @map("device_id")
  verified   Boolean  @default(false)
  districtId String   @map("district_id")
  provinceId String   @map("province_id")
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")
  district   District @relation(fields: [districtId], references: [id]) // Many-to-one relation with District
  province   Province @relation(fields: [provinceId], references: [id]) // Many-to-one relation with Province

  @@map("subscribers")
}
